(this["webpackJsonppantry-project-frontend"]=this["webpackJsonppantry-project-frontend"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(30),i=n.n(r),s=n(7),l=n(35),o=n(9),j=n(153),u=n(154),d=n(144),b=n(155),h=n(150),x=n(148),O=n(149),m=n(15),f=n.n(m),p=n(19),g=function(e,t){var n=Object(a.useState)((function(){try{var n=localStorage.getItem(e);return n?JSON.parse(n):(localStorage.setItem(e,JSON.stringify(t)),t)}catch(a){return t}})),c=Object(s.a)(n,2),r=c[0],i=c[1];return[r,function(t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}i(t)}]},v=n(1),S=Object(a.createContext)(),C=function(e){var t=e.children,n=g("user",null),a=Object(s.a)(n,2),c=a[0],r=a[1],i=Object(o.o)(),l=Object(o.l)(),j=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t),c=(null===(n=l.state)||void 0===n||null===(a=n.from)||void 0===a?void 0:a.pathname)||"/mainlist",i(c);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(S.Provider,{value:{user:c,setUser:r,login:j,logout:function(){r(null),localStorage.removeItem("user"),i("/",{replace:!0})},getToken:function(){var e=JSON.parse(localStorage.getItem("user"));return String(e.accessToken)}},children:t})},y=function(){return Object(a.useContext)(S)};var N=function(){var e=a.useState({email:"",password:""}),t=Object(s.a)(e,2),n=t[0],c=t[1],r=y(),i=Object(o.o)(),l=function(e){var t=e.target,a=t.value,r=t.name,i=n;i[r]=a,c(i)};return Object(v.jsx)(h.a,{className:"outerContainer",children:Object(v.jsx)(h.a,{sx:{width:"50%",display:"flex",flexDirection:"column",pt:"5%"},children:Object(v.jsxs)(x.a,{container:!0,className:"gridContainer",direction:"column",columns:1,spacing:3,alignItems:"center",children:[Object(v.jsx)(x.a,{item:!0,children:Object(v.jsxs)(j.a,{className:"formControl",children:[Object(v.jsx)(u.a,{sx:{textAlign:"center",fontSize:"26px",pb:"25px"},children:"Welcome to Pantry"}),Object(v.jsx)(d.a,{label:"Email",size:"small",onChange:l,name:"email",sx:{alignSelf:"center",pb:"20px",minWidth:"100px"}}),Object(v.jsx)(d.a,{label:"Password",size:"small",onChange:l,name:"password",sx:{alignSelf:"center",pb:"20px",minWidth:"100px"}}),Object(v.jsx)(O.a,{variant:"contained",type:"submit",size:"large",onClick:function(e){e.preventDefault(),fetch("http://localhost:3010/v0/authenticate",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){r.login(e)})).catch((function(e){console.log(e),alert("Error logging in, please try again")}))},sx:{alignSelf:"center",backgroundColor:"darkblue",height:"35px"},children:"Login"})]})}),Object(v.jsx)(x.a,{item:!0,alignContent:"center",children:Object(v.jsxs)(b.a,{sx:{justifyContent:"center",alignContent:"center",pt:"35px"},children:[Object(v.jsx)(u.a,{sx:{textAlign:"center",fontSize:"22px",pb:"5px"},children:"Don't have an account?"}),Object(v.jsx)(O.a,{variant:"contained",size:"large",onClick:function(e){i("/createaccount")},sx:{alignSelf:"center",backgroundColor:"darkblue",height:"35px"},children:"Sign Up"})]})})]})})})};n(101);function k(){var e=y();return Object(v.jsxs)("nav",{className:"nav",children:[Object(v.jsx)("a",{href:"/",className:"site-title",children:"Pantry"}),Object(v.jsx)("ul",{children:Object(v.jsx)("li",{children:Object(v.jsx)("a",{onClick:function(t){t.preventDefault(),e.logout()},href:"/",children:"Logout"})})})]})}n(102);function w(){return Object(v.jsx)("div",{className:"sidebar",children:Object(v.jsx)("div",{className:"sidebar-buttons",children:Object(v.jsxs)("ul",{children:[Object(v.jsxs)("li",{children:[" ",Object(v.jsx)("a",{href:"test1",children:"Join a Group"})]}),Object(v.jsxs)("li",{children:[" ",Object(v.jsx)("a",{href:"test2",children:"Create a Group"})]}),Object(v.jsxs)("li",{children:[" ",Object(v.jsx)("a",{href:"test3",children:"Other Stuff"})]}),Object(v.jsxs)("li",{children:[" ",Object(v.jsx)("a",{href:"test4",children:"Settings"})]})]})})})}var I=n(151),D=n(146),z=n(152);n(103);function P(){var e=c.a.useContext(W).dataChanged,t=Object(a.useState)([]),n=Object(s.a)(t,2),r=n[0],i=n[1],l=y();function o(){return(o=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://localhost:3010/v0/foodlist",{method:"GET",headers:{accept:"application/json",Authorization:"Bearer ".concat(l.getToken())}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){i(e.rows)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(e){o.apply(this,arguments)}()}),[e]),Object(v.jsxs)("div",{className:"mainList",children:[Object(v.jsx)("p",{className:"listName",children:"List Name"}),Object(v.jsx)("div",{children:Object(v.jsx)(I.a,{children:r.map((function(e,t){return Object(v.jsx)(D.a,{button:!0,children:Object(v.jsx)(z.a,{primary:e.item})},t)}))})})]})}var L=function(){var e=Object(o.o)(),t=a.useState({name:"",email:"",password:""}),n=Object(s.a)(t,2),c=n[0],r=n[1],i=a.useState(""),l=Object(s.a)(i,2),j=l[0],m=l[1],f=y(),p=function(e){var t=e.target,n=t.value,a=t.name;console.log(n,a);var i=c;i[a]=n,r(i)};return Object(v.jsx)(h.a,{sx:{width:"50%",display:"flex",flexDirection:"column",pt:"5%"},children:Object(v.jsxs)(x.a,{container:!0,direction:"column",columns:1,spacing:3,justifyContent:"center",alignItems:"center",children:[Object(v.jsx)(x.a,{item:!0,children:Object(v.jsxs)(b.a,{sx:{justifyContent:"center",alignContent:"center",verticalAlign:"center"},children:[Object(v.jsx)(u.a,{sx:{textAlign:"center",fontSize:"26px",pb:"25px"},children:"Create an Account"}),Object(v.jsx)(d.a,{label:"Username",size:"small",onChange:p,name:"name",sx:{alignSelf:"center",pb:"20px",minWidth:"100px"}}),Object(v.jsx)(d.a,{label:"Email",size:"small",onChange:p,name:"email",sx:{alignSelf:"center",pb:"20px",minWidth:"100px"}}),Object(v.jsx)(d.a,{label:"Password",size:"small",onChange:p,name:"password",sx:{alignSelf:"center",pb:"20px",minWidth:"100px"}}),Object(v.jsx)(d.a,{label:"Confirm Password",size:"small",onChange:function(e){var t=e.target.value;m(t)},sx:{alignSelf:"center",pb:"20px",minWidth:"100px"}}),Object(v.jsx)(O.a,{variant:"contained",size:"large",onClick:function(e){e.preventDefault(),0===j.localeCompare(c.password)?fetch("http://localhost:3010/v0/signup",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){f.login(e)})).catch((function(e){console.log(e),alert("Account already exists with given email.")})):alert("Passwords don't match!")},sx:{alignSelf:"center",backgroundColor:"darkblue",height:"35px"},children:"Sign Up"})]})}),Object(v.jsx)(x.a,{item:!0,children:Object(v.jsx)(O.a,{variant:"contained",size:"large",onClick:function(t){e("/")},sx:{alignSelf:"center",backgroundColor:"darkblue",height:"35px"},children:"Return"})})]})})},T=function(){var e=y().user,t=Object(o.l)();return e?Object(v.jsx)(o.b,{}):Object(v.jsx)(o.a,{to:"/",replace:!0,state:{from:t}})};n(104);function J(){var e=new Date,t=e.toLocaleString("default",{year:"numeric"})+"-"+e.toLocaleString("default",{month:"2-digit"})+"-"+e.toLocaleString("default",{day:"2-digit"}),n=Object(a.useState)(""),r=Object(s.a)(n,2),i=r[0],l=r[1],o=Object(a.useState)(0),j=Object(s.a)(o,2),u=j[0],d=j[1],b=Object(a.useState)(t.toString()),h=Object(s.a)(b,2),x=h[0],O=h[1],m=Object(a.useState)(""),f=Object(s.a)(m,2),p=f[0],g=f[1],S=Object(a.useState)({}),C=Object(s.a)(S,2),N=C[0],k=(C[1],y()),w=c.a.useContext(W),I=w.setDataChanged,D=w.dataChanged;return Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={item:i,amount:parseInt(u),purchaseDate:x,notes:p,tags:N};console.log("itemObject"),console.log(t),fetch("http://localhost:3010/v0/foodlist",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k.getToken())}}).then((function(e){if(console.log(e),!e.ok)throw e;return e.json()})).then((function(e){I(!D)})).catch((function(e){console.log("err",e),alert(e)}))},children:Object(v.jsx)("div",{className:"rightbar",children:Object(v.jsx)("div",{className:"rightbar-buttons",children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{className:"boxLabel",children:"Name of Item"}),Object(v.jsx)("li",{children:Object(v.jsx)("input",{id:"itemName",type:"text",className:"addItemName",placeholder:"Item Name",onChange:function(e){return l(e.target.value)}})}),Object(v.jsx)("li",{}),Object(v.jsx)("li",{className:"boxLabel",children:"Item Quantity"}),Object(v.jsx)("li",{children:Object(v.jsx)("input",{id:"itemCount",type:"number",className:"addItemCount",placeholder:"",onChange:function(e){return d(e.target.value)}})}),Object(v.jsx)("li",{className:"boxLabel",children:"Date Purchased"}),Object(v.jsx)("li",{children:Object(v.jsx)("input",{id:"itemDate",type:"date",className:"addItemDate",placeholder:"Input an item to add...",onChange:function(e){return O(e.target.value)}})}),Object(v.jsx)("li",{className:"boxLabel",children:"Description of Item"}),Object(v.jsx)("li",{children:Object(v.jsx)("textarea",{id:"itemDesc",type:"text",className:"addItemDesc",placeholder:"Write a description for your item...",onChange:function(e){return g(e.target.value)}})}),A(["Shared","Dairy","Meat","Produce","Spice"],(function(e,t){N[e]=t})),Object(v.jsx)("li",{className:"buttonLi",children:Object(v.jsx)("button",{className:"addItemButton",children:"Add Item"})})]})})})})}function A(e,t){for(var n=[],a=function(a){var c=e[a];n.push(Object(v.jsxs)("label",{className:"tagBox",children:[Object(v.jsx)("input",{type:"checkbox",id:"tag"+c,className:"tag",onChange:function(e){return t(c,e.target.checked)}},c),c]},c))},c=0;c<e.length;c++)a(c);return n}var W=c.a.createContext();var E=function(){var e=y(),t=c.a.useState(!1),n=Object(s.a)(t,2),r=n[0],i=n[1],j=g("user",null),u=!1;return Object(a.useRef)((function(){e.setUser(j),u=e.user})),Object(v.jsx)(l.a,{children:Object(v.jsx)(C,{children:Object(v.jsx)(W.Provider,{value:{dataChanged:r,setDataChanged:i},children:Object(v.jsxs)(o.e,{children:[Object(v.jsx)(o.c,{path:"/createaccount",element:Object(v.jsx)(L,{})}),Object(v.jsx)(o.c,{path:"/",element:u?Object(v.jsx)(o.a,{to:"/mainlist"}):Object(v.jsx)(N,{})}),Object(v.jsx)(o.c,{element:Object(v.jsx)(T,{}),children:Object(v.jsx)(o.c,{path:"/mainlist",element:Object(v.jsxs)("div",{children:[Object(v.jsx)(P,{}),Object(v.jsx)(k,{}),Object(v.jsx)(w,{}),Object(v.jsx)(J,{})]})})})]})})})})};i.a.render(Object(v.jsx)(E,{}),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.0c70bf37.chunk.js.map